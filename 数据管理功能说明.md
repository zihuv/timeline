# 数据管理功能使用说明

## 概述

时间轴日记应用提供了完整的数据管理功能，包括数据导出、导入和同步，帮助用户在不同设备和环境之间迁移数据，以及进行数据备份。

## 功能入口

点击应用右上角的"数据管理"按钮即可打开数据管理对话框。

## 数据导出功能

### 导出选项

1. **仅导出本地数据**
   - 导出当前浏览器本地存储的所有日记数据
   - 适用于本地备份或迁移到其他浏览器

2. **仅导出服务器数据**（需要配置服务器）
   - 导出服务器上存储的所有日记数据
   - 适用于服务器数据备份

3. **导出所有数据**（需要配置服务器）
   - 合并本地和服务器数据后导出
   - 自动去重，确保数据完整性

### 导出文件格式

导出的文件为JSON格式，包含以下信息：
- 版本信息
- 导出时间
- 导出模式
- 日记数据（按日期分组）

### 使用方法

1. 选择导出模式
2. 点击"导出数据"按钮
3. 文件将自动下载到本地

## 数据导入功能

### 导入模式

1. **合并模式**
   - 将导入的数据与现有数据合并
   - 保留现有数据，只添加新数据
   - 相同ID的日记会被更新

2. **覆盖模式**
   - 用导入的数据完全替换现有数据
   - 现有数据将被清除
   - 适用于数据恢复或重置

### 支持的文件格式

- JSON格式的日记数据文件
- 必须包含正确的数据结构
- 建议使用应用导出的文件进行导入

### 使用方法

1. 选择导入模式
2. 点击文件上传区域选择文件
3. 点击"导入数据"按钮
4. 等待导入完成

## 数据同步功能

### 同步选项

1. **同步到服务器**
   - 将本地数据上传到服务器
   - 覆盖服务器上的现有数据
   - 需要先配置服务器地址

2. **从服务器同步**
   - 将服务器数据下载到本地
   - 覆盖本地现有数据
   - 需要先配置服务器地址

### 使用方法

1. 确保已配置服务器地址
2. 选择同步方向
3. 确认同步操作
4. 等待同步完成

## 数据统计

数据管理界面会显示当前数据的统计信息：

- **本地日记数**：本地存储的日记条目总数
- **本地天数**：本地存储的日记天数
- **服务器日记数**：服务器存储的日记条目总数（仅在有服务器配置时显示）
- **服务器天数**：服务器存储的日记天数（仅在有服务器配置时显示）

## 注意事项

### 数据安全

1. **备份重要数据**：在进行覆盖操作前，建议先导出备份
2. **验证文件格式**：确保导入的文件格式正确
3. **网络连接**：同步功能需要稳定的网络连接

### 数据一致性

1. **ID冲突处理**：导入时会根据日记ID进行去重
2. **时间戳保留**：导入时会保留原始的时间戳信息
3. **图片处理**：图片URL会一并导入，但需要确保图片资源可访问

### 性能考虑

1. **大文件处理**：大量数据导入可能需要较长时间
2. **内存使用**：导入大文件时注意浏览器内存使用
3. **网络带宽**：同步大量数据时注意网络带宽消耗

## 常见问题

### Q: 导入失败怎么办？
A: 检查文件格式是否正确，确保是应用导出的JSON文件。

### Q: 同步时网络中断怎么办？
A: 网络恢复后可以重新进行同步操作，系统会自动处理重复数据。

### Q: 可以导入其他格式的文件吗？
A: 目前只支持JSON格式，建议使用应用导出的标准格式文件。

### Q: 数据同步会丢失数据吗？
A: 同步操作会覆盖目标位置的数据，建议在同步前先导出备份。

## 测试数据

项目根目录下的 `test-data.json` 文件包含示例数据，可用于测试导入功能。 